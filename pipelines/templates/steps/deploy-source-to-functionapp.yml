parameters:
  - name: azureSubscription
  - name: resourceGroupName
  - name: appName
  - name: resourceName
  - name: releasesDir

steps:
  - task: AzureCLI@2
    displayName: Deploy zip to ${{ parameters.appName }}
    inputs:
      azureSubscription: ${{ parameters.azureSubscription }}
      scriptType: ps
      scriptLocation: inlineScript
      inlineScript: |
        $src="${{ parameters.releasesDir }}\${{ parameters.appName }}.zip"
        echo "Source: $src"
        ./deploy/scripts/deploy-function-app.ps1 -ResourceGroup "${{ parameters.resourceGroupName }}" -Name "${{ parameters.resourceName }}" -Src $src
