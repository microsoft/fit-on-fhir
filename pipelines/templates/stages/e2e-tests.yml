parameters:
  - name: environment
    default: ''

stages:
  - stage: E2ETests
    displayName: E2ETests
    dependsOn:
    - EphemeralDeploy
    - DurableDeploy
    variables:
      - template: ../variables/${{ parameters.environment }}.yml
    jobs:
      - job: AuthToGFit
        displayName: Auth to Google Fit
        steps:
          - task: Bash@3
            displayName: Get Refresh Token
            inputs:
              targetType: inlineScript
              script: |
                echo "Placeholder - Retrieve the refresh token from key vault"
          - task: Bash@3
            displayName: Get Access Token
            inputs:
              targetType: inlineScript
              script: |
                echo "Placeholder - Use refresh token to get and store GFit access token"
      - job: CreateDataSource
        displayName: Create New DataSource in GFit
        steps:
          - task: Bash@3
            displayName: Create DataSource for Test User"
            inputs:
              targetType: inlineScript
              script: |
                echo "Placeholder - Create a new DataSource for GFit test user"





